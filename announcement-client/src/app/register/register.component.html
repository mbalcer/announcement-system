<div class="login-page">
  <h2>Rejestracja</h2>
  <form (ngSubmit)="f.form.valid && signUp(f)" #f="ngForm" novalidate>
    <div class="form-group">
      <label for="username">Login</label>
      <input type="text" class="form-input" name="username" [(ngModel)]="form.username" required minlength="3"
             maxlength="20" #username="ngModel"/>
      <div class="message" *ngIf="f.submitted && username.invalid">
        <div class="error" *ngIf="username.errors.required">Username is required!</div>
        <div class="error" *ngIf="username.errors.minlength">Username must be at least 3 characters</div>
        <div class="error" *ngIf="username.errors.maxlength">Username must be at most 20 characters</div>
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" class="form-input" name="email" [(ngModel)]="form.email" required email #email="ngModel"/>
      <div class="message" *ngIf="f.submitted && email.invalid">
        <div class="error" *ngIf="email.errors.required">Email is required</div>
        <div class="error" *ngIf="email.errors.email">Email must be a valid email address</div>
      </div>
    </div>

    <div class="form-group">
      <label for="password">Hasło</label>
      <input type="password" class="form-input" name="password" [(ngModel)]="form.password" required minlength="6" #password="ngModel">
      <div class="message" role="alert" *ngIf="f.submitted && password.invalid">
        <div class="error" *ngIf="password.errors.required">Password is required</div>
        <div class="error" *ngIf="password.errors.minlength">Password must be at least 6 characters</div>
      </div>
    </div>

    <div class="form-group">
      <label for="password">Powtórz hasło</label>
      <input type="password" class="form-input" name="confirm-password" [(ngModel)]="form.confirmPassword" required
             #confirmPassword="ngModel" pattern="{{form.password}}"/>
      <div class="message" role="alert" *ngIf="f.submitted && confirmPassword.invalid">
        <div class="error" *ngIf="confirmPassword.errors.required">Confirm password is required</div>
        <div class="error" *ngIf="confirmPassword.errors.pattern">Password & Confirm Password must be the same</div>
      </div>
    </div>

    <div class="form-group">
      <button mat-raised-button color="primary">Zarejestruj się</button>
    </div>

    <div class="message">
      <div class="error" *ngIf="!isSuccessfulRegister && f.submitted">{{errorMessage}}</div>
      <div class="success" *ngIf="isSuccessfulRegister">Your registration is successful!</div>
    </div>

    <span class="register">Masz już konto? <a class="color-link" routerLink="/login">Zaloguj się</a></span>
  </form>
</div>
